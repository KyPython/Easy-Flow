# ============================================
# EasyFlow Backend Environment Configuration
# ============================================
# 
# CRITICAL: This file must be configured for the app to work properly.
# Copy this to .env and fill in your actual values.
#
# The authentication cascade (401 → FCM 400 → Supabase instability) is
# caused by missing or mismatched Firebase configuration.
#
# ============================================
# FIREBASE CONFIGURATION (REQUIRED)
# ============================================
# These MUST match your frontend Firebase configuration
# Frontend expects project ID: easyflow-77db9
# Get these from: Firebase Console → Project Settings → Service Accounts

FIREBASE_PROJECT_ID=easyflow-77db9
FIREBASE_CLIENT_EMAIL=your-service-account@easyflow-77db9.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
FIREBASE_DATABASE_URL=https://easyflow-77db9-default-rtdb.firebaseio.com/

# ============================================
# SUPABASE CONFIGURATION (REQUIRED)
# ============================================
# Get these from: Supabase Dashboard → Settings → API

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
# Alternative names (any one will work):
# SUPABASE_SERVICE_ROLE=your-service-role-key-here
# SUPABASE_KEY=your-service-role-key-here

# ============================================
# INTEGRATION OAUTH CONFIGURATION (OPTIONAL)
# ============================================
# Required only if you want to use these integrations
# Get these from the respective developer consoles

# Google OAuth (for Gmail, Google Sheets, Google Meet)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Slack OAuth
SLACK_CLIENT_ID=your-slack-client-id
SLACK_CLIENT_SECRET=your-slack-client-secret

# ============================================
# DEV BYPASS SECURITY (STOLEN LAPTOP PROTECTION)
# ============================================
# These settings help protect against unauthorized access if laptop is stolen

# Enable/disable dev bypass (set to 'false' in production)
DEV_BYPASS_ENABLED=false

# Generate a secure token: openssl rand -hex 32
DEV_BYPASS_TOKEN=your-secure-random-token-min-64-chars

# Optional: Comma-separated list of allowed IPs for dev bypass
# Leave empty to allow any IP (less secure)
DEV_BYPASS_ALLOWED_IPS=127.0.0.1,::1

# Optional: Store previous known good token for rotation detection
# If current token differs from this, logs will show warning
# DEV_BYPASS_TOKEN_KNOWN_GOLD=previous-token-here

# Default user ID for dev bypass
DEV_USER_ID=dev-user-123

# ============================================
# OTHER CONFIGURATION
# ============================================
# Add other environment variables as needed

NODE_ENV=development
PORT=3030
API_BASE_URL=http://localhost:3030

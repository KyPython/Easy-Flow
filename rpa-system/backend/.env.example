# Backend Environment Variables (example)
# Copy this file to .env and fill in the values.
# NOTE: Do NOT commit your .env.

# --- Core service config ---
NODE_ENV=development
PORT=3030
HOST=0.0.0.0

# Public app URL used in links within emails or shared content
FRONTEND_URL=http://localhost:3000
# Base URL for webhook links (defaults to request host if not set)
WEBHOOK_BASE_URL=

# --- Session & security ---
# 32+ char random strings recommended
SESSION_SECRET=replace-with-strong-random-string
CREDENTIAL_ENCRYPTION_KEY=replace-with-32+char-secret
ADMIN_API_SECRET=replace-with-admin-api-secret

# --- Supabase (required) ---
SUPABASE_URL=https://syxzilyuysdoirnezgii.supabase.co
# Prefer SERVICE_ROLE on the server (keep it secret)
SUPABASE_SERVICE_ROLE=replace-with-service-role-key
# Optional: Some scripts/tests may use anon or key
SUPABASE_ANON_KEY=
SUPABASE_KEY=
# Storage settings
SUPABASE_BUCKET=artifacts
# Use signed URLs for downloads (default true). Set to false to disable
SUPABASE_USE_SIGNED_URLS=true
# Signed URL TTL in seconds (min 60). Default 86400 (24h)
SUPABASE_SIGNED_URL_EXPIRES=86400

# --- File storage paths ---
# In-container download dir (used by Docker)
DOWNLOADS_DIR_CONTAINER=/downloads
# Host path for downloads (auto-detected if empty)
DOWNLOADS_DIR_HOST=

# --- Auth/testing toggles ---
ALLOW_DRAFT_EXECUTION=false
ALLOW_TEST_TOKEN=false
TEST_BEARER_TOKEN=
TEST_USER_ID=

# --- Optional integrations ---
# Mixpanel (server-side events)
MIXPANEL_TOKEN=
# HubSpot CRM (server-side)
HUBSPOT_API_KEY=

# Polar (sponsorship/payments) â€” optional
POLAR_API_KEY=
POLAR_WEBHOOK_SECRET=
POLAR_API_URL=https://api.polar.sh/v1

# Kafka
# Toggle Kafka integration (true/false). Disabled by default on many hosts.
KAFKA_ENABLED=false
# Broker list. In local dev, prefer localhost:9092; in Docker, often kafka:9092
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TASK_TOPIC=automation-tasks
KAFKA_RESULT_TOPIC=automation-results
KAFKA_CONSUMER_GROUP=backend-service

# Email worker (optional)
ENABLE_EMAIL_WORKER=true
SEND_EMAIL_WEBHOOK=
SEND_EMAIL_WEBHOOK_SECRET=
EMAIL_WORKER_POLL_MS=5000

# SendGrid (optional; enables /api/send)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=

# Automation service (optional)
AUTOMATION_MODE=stub # options: stub | python
AUTOMATION_URL=
AUTOMATION_API_KEY=

# CORS
# Comma-separated explicit origins (overrides defaults)
ALLOWED_ORIGINS=
# Suffixes allowed in production when ALLOWED_ORIGINS is empty (e.g., .vercel.app)
ALLOWED_ORIGIN_SUFFIXES=.vercel.app

# --- Development bypass (local only) ---
# A long random token used to authorize dev-only bypasses. Keep this out of git.
# Send with header: x-dev-bypass: <DEV_BYPASS_TOKEN>
DEV_BYPASS_TOKEN=replace-with-long-random-token
# Optional: a local DEV_USER_ID (uuid) that will be used when the dev bypass is active
DEV_USER_ID=replace-with-dev-user-uuid
